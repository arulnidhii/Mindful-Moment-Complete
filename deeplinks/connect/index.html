<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Opening Mindful Moment…</title>
  <style>
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 2rem; color: #0f172a; }
    .card { max-width: 640px; margin: 0 auto; border-radius: 16px; padding: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
    h1 { font-size: 1.5rem; margin: 0 0 0.75rem; }
    p { line-height: 1.6; }
    .muted { color: #475569; }
    .btn { display: inline-block; background: #111827; color: white; padding: 10px 14px; border-radius: 10px; text-decoration: none; margin-top: 12px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Opening Mindful Moment…</h1>
    <p class="muted">If nothing happens, tap the button below.</p>
    <a id="openApp" class="btn" href="#">Open in app</a>
    <p class="muted" style="margin-top: 20px;">Don’t have the app yet? We’ll take you to the store.</p>
  </div>
  <script>
    (function() {
      // Extract requestId from final path segment
      var path = window.location.pathname; // /connect/<id>
      var id = (path.split('/').filter(Boolean)[1]) || '';
      var schemeUrl = 'myapp://connect/' + encodeURIComponent(id);
      var playUrl = 'https://play.google.com/store/apps/details?id=com.arulsdk.mindfulmoment7y4ko4c&hl=en-US';

      document.getElementById('openApp').href = schemeUrl;

      // Try to open the app, then fallback
      var now = Date.now();
      window.location.href = schemeUrl;
      setTimeout(function() {
        // If still here after 1s, likely not installed
        if (Date.now() - now < 1500) {
          window.location.href = playUrl;
        }
      }, 1000);
    })();
  </script>
</body>
</html>
